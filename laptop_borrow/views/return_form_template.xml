<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <template id="return_form_template" name="Form Pengembalian Laptop">
    <t t-call="website.layout">

        <script type="text/javascript" src="/laptop_borrow/static/src/js/return_form.js"></script>

      <div class="container mt-5 mb-5 return-form-card">
        <h2 class="text-center mb-4">Form Pengembalian Laptop</h2>

        <!-- ✅ TAMBAHKAN ERROR DISPLAY -->
        <t t-if="error">
          <div class="alert alert-danger">
            <strong>⚠ Kesalahan:</strong> <span t-esc="error"/>
          </div>
        </t>

        <form action="/form/pengembalian/submit" method="POST">
          <!-- ✅ TAMBAHKAN CSRF TOKEN -->
          <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

          <!-- KELAS -->
          <div class="form-group mb-3">
            <label for="class_id">Kelas</label>
            <select name="class_id" id="class_id" class="form-control" required="required">
              <option value="">-- Pilih Kelas --</option>
              <t t-foreach="classes" t-as="kelas">
                <option t-att-value="kelas.id"><t t-esc="kelas.name"/></option>
              </t>
            </select>
          </div>

          <!-- SISWA -->
          <div class="form-group mb-3">
            <label>Nama Siswa</label>
            <select id="borrower_id" name="borrower_id" class="form-control" required="required">
              <option value="">-- Pilih Nama --</option>
            </select>
          </div>

          <!-- KODE PEMINJAMAN -->
          <div class="form-group mb-3">
            <label for="borrow_id">Kode Peminjaman</label>
            <select name="borrow_id" id="borrow_id" class="form-control" required="required">
              <option value="">-- Pilih Kode Peminjaman --</option>
            </select>
            <small class="text-muted">Hanya menampilkan peminjaman aktif milik siswa terpilih</small>
          </div>

          <button type="submit" class="btn btn-primary w-100">Kembalikan Laptop</button>
          
          <a href="/" class="btn btn-secondary mt-2 w-100">⬅ Kembali ke Homepage</a>
        </form>
      </div>
    </t>
  </template>

  <template id="return_form_success" name="Pengembalian Berhasil">
    <t t-call="website.layout">
      <div class="container text-center mt-5 mb-5">
        <h3>✅ Pengembalian Laptop Berhasil!</h3>
        <p>Terima kasih telah mengembalikan laptop tepat waktu.</p>
        <a href="/form/pengembalian" class="btn btn-secondary mt-3">Kembali ke Form</a>
      </div>
    </t>
  </template>
</odoo>
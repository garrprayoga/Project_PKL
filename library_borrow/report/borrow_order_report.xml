<odoo>
    <!-- Action Report -->
    <record id="action_borrow_order_report" model="ir.actions.report">
        <field name="name">Print</field>
        <field name="model">borrow.order</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">library_borrow.borrow_order_report_template</field>
        <field name="report_file">library_borrow.borrow_order_report_template</field>
        <field name="print_report_name">'BorrowOrder-%s' % (object.name)</field>
        <field name="binding_model_id" ref="model_borrow_order"/>
        <field name="binding_type">report</field>
    </record>

    <!-- Template Report -->
    <template id="borrow_order_report_template" name="Borrow Order Report">
        <t t-call="web.external_layout">
            <main>
                <t t-foreach="docs" t-as="o">
                    <div class="page">
                        <h2 style="text-align:center;">Library Borrow Order</h2>
                        <hr/>

                        <p><strong>Borrow Number:</strong> <span t-esc="o.name"/></p>
                        <p><strong>Borrower:</strong> <span t-esc="o.partner_id.name"/></p>
                        <p><strong>Book:</strong> <span t-esc="o.book_id.name"/></p>

                        <p><strong>Borrow Date:</strong> <span t-esc="o.borrow_date"/></p>
                        <p><strong>Due Date:</strong> <span t-esc="o.due_date"/></p>
                        <p><strong>Return Date:</strong> <span t-esc="o.return_date or '-'"/></p>

                        <h3>Denda</h3>
                        <table class="table table-sm o_main_table" style="width:100%; border-collapse: collapse;">
                            <thead>
                                <tr>
                                    <th style="border:1px solid black; text-align:center;">Late Days</th>
                                    <th style="border:1px solid black; text-align:center;">Rule</th>
                                    <th style="border:1px solid black; text-align:center;">Penalty / Day</th>
                                    <th style="border:1px solid black; text-align:center;">Total Penalty</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="border:1px solid black; text-align:center;">
                                        <span t-esc="o.late_days"/>
                                    </td>
                                    <td style="border:1px solid black; text-align:center;">
                                        <span t-esc="o.penalty_rule_id.name"/>
                                    </td>
                                    <td style="border:1px solid black; text-align:center;">
                                        <span t-esc="o.penalty_per_day"/>
                                    </td>
                                    <td style="border:1px solid black; text-align:center;">
                                        <span t-esc="o.penalty_amount"/>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <div style="margin-top:50px;">
                            <p><em>Dicetak otomatis oleh sistem perpustakaan.</em></p>
                        </div>
                    </div>
                </t>
            </main>
        </t>
    </template>
</odoo>
